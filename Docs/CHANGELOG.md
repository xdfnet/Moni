# 更新日志

## [v1.07] - 2025-01-13

### 🚀 新增功能
- **代码结构优化**：删除了重复和未使用的函数，提高代码质量
- **统一工具函数库**：所有格式化、时间处理、调试都使用 `Utilities` 工具库
- **线程安全优化**：统一使用 `Utilities.safeMainQueueCallback` 确保主线程回调安全
- **环境变量继承**：修复了终端环境变量配置，支持 zsh 和 bash
- **Python 路径优化**：自动识别并使用 Homebrew 安装的 Python 3.13.7
- **终端配置统一**：Cursor 和 VSCode 都配置为使用 zsh 终端

### 🔧 优化改进
- **代码质量提升**：遵循 Swift 最佳实践，注释完整，结构清晰
- **删除未使用代码**：清理了 `ServiceManager` 中未使用的方法
- **优化网络监控**：改进了 `MonitorNetwork.swift` 中的错误处理和代码结构
- **延迟监控优化**：修复了 `MonitorLatency.swift` 中的缩进和主线程回调问题
- **配置管理优化**：统一了主线程回调的使用方式

### 🐛 问题修复
- 修复了 `MonitorLatency.swift` 中 `handleConnectionFailure` 方法的缩进问题
- 修复了多个文件中 `DispatchQueue.main.async` 的使用不一致问题
- 修复了 `MonitorNetwork.swift` 中格式化函数使用不一致的问题
- 修复了终端环境变量继承问题，确保 Homebrew 命令可用

### 📚 文档更新
- 更新了 README.md 中的项目特性和技术架构说明
- 添加了工具函数库的详细说明
- 更新了版本历史和服务支持列表

---

## [v1.06] - 2025-01-13

### 🚀 新增功能
- **简化状态管理**：连接成功/失败两种状态，无复杂重试逻辑
- **实时状态指示**：✓ 连接成功 / ⚠️ 连接失败，直观显示系统状态
- **智能服务分类**：AI 服务、包管理器、容器服务三大类别
- **系统睡眠/唤醒支持**：自动重建状态栏和恢复监控
- **线程安全设计**：NSLock 保护共享状态，专用队列处理配置
- **数据验证机制**：过滤异常数据，自动重置网络统计
- **工具函数库**：丰富的开发工具和调试支持
- **模块化构建**：灵活的 Makefile 构建系统

### 🔧 优化改进
- 重构了 `BaseMonitor` 类，提供统一的监控基础
- 优化了 `MonitorNetwork` 的网络统计计算
- 改进了 `ServiceManager` 的服务分类管理
- 增强了 `ConfigurationManager` 的配置持久化

### 🐛 问题修复
- 修复了网络监控中的异常数据处理
- 改进了系统睡眠/唤醒后的状态恢复
- 优化了菜单栏的显示逻辑

---

## [v1.05] - 2025-01-13

### 🚀 新增功能
- **代码质量检查**：添加了 `code_quality_check.sh` 脚本
- **注释规范**：建立了统一的代码注释标准
- **构建优化**：改进了 Makefile 构建系统

### 🔧 优化改进
- 统一了代码注释风格
- 优化了项目构建流程
- 改进了代码质量检查机制

---

## [v1.04] - 2025-01-13

### 🚀 新增功能
- **基础监控类**：实现了 `BaseMonitor` 抽象类
- **网络监控**：添加了系统网络流量监控功能
- **服务管理**：实现了服务端点的分类管理

### 🔧 优化改进
- 重构了监控系统架构
- 优化了服务端点配置
- 改进了网络统计计算

---

## [v1.03] - 2025-01-13

### 🚀 新增功能
- **延迟监控**：实现了 TCP 连接延迟测量
- **菜单栏控制器**：添加了完整的菜单栏界面

### 🔧 优化改进
- 优化了网络连接处理
- 改进了用户界面响应

---

## [v1.02] - 2025-01-12

### 🚀 新增功能
- **应用入口**：实现了 SwiftUI 应用入口
- **基础架构**：建立了基本的应用架构

### 🔧 优化改进
- 设计了应用生命周期管理
- 建立了基础的项目结构

---

## [v1.01] - 2025-01-12

### 🚀 新增功能
- **项目初始化**：创建了基本的项目结构
- **构建工具**：添加了 Makefile 构建系统

### 🔧 优化改进
- 建立了项目目录结构
- 配置了基本的构建流程

---

## [v1.00] - 2025-01-12

### 🚀 新增功能
- **初始版本发布**：项目基础框架
- **基本功能**：菜单栏应用基础结构

### 🔧 优化改进
- 建立了项目基础架构
- 配置了开发环境

---

## 版本说明

- **主版本号**：重大功能更新或架构变更
- **次版本号**：新功能添加或重要改进
- **修订版本号**：问题修复和小幅优化

## 更新策略

- 每个版本都会经过充分测试
- 重要更新会提供迁移指南
- 向后兼容性优先考虑
- 定期发布安全更新

---

*更多详细信息请参考 [README.md](../README.md) 和 [API 参考](API_REFERENCE.md)*
